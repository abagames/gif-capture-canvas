!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.gcc=e():t.gcc=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);let o,i,a;e.options={scale:.5,durationSec:3,keyCode:67,capturingFps:20,appFps:60,isAppendingImgElement:!0,quality:10,downloadFileName:null,isSmoothingEnabled:!0};let c=0,u=0,f=new Image,s=!1;function l(t){u++;const n=e.options.appFps/e.options.capturingFps;u<n||(u-=n,i||function(t){s?i=[]:(o=e.options.durationSec*e.options.capturingFps,i=y(o,()=>d(t)),a=y(o,()=>!1));document.addEventListener("keydown",t=>{t.keyCode==e.options.keyCode&&p()})}(t),s&&i.push(d(t)),i[c].drawImage(t,0,0),s||(a[c]=!0),c++,!s&&c>=o&&(c=0))}function d(t){const n=document.createElement("canvas");n.width=t.width*e.options.scale,n.height=t.height*e.options.scale;const r=n.getContext("2d");return r.imageSmoothingEnabled=e.options.isSmoothingEnabled,r.scale(e.options.scale,e.options.scale),r}function p(){const t=new r;if(t.setRepeat(0),t.setDelay(1e3/e.options.capturingFps),t.setQuality(e.options.quality),t.start(),s)y(c-1,e=>{t.addFrame(i[e])});else{let e=c;y(o,()=>{a[e]&&t.addFrame(i[e]),e++,e>=o&&(e=0)})}if(t.finish(),null!=e.options.downloadFileName)return t.download(e.options.downloadFileName),null;const n=t.stream().getData(),u=document.createElement("img");return u.src="data:image/gif;base64,"+function(t){var e,n,r,o,i,a,c,u="",f=0,s=t.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(;f<s;)e=t.charCodeAt(f++),n=t.charCodeAt(f++),r=t.charCodeAt(f++),o=e>>2,i=(3&e)<<4|n>>4,a=(15&n)<<2|r>>6,c=63&r,isNaN(n)?a=c=64:isNaN(r)&&(c=64),u=u+l.charAt(o)+l.charAt(i)+l.charAt(a)+l.charAt(c);return u}(n),e.options.isAppendingImgElement&&document.getElementsByTagName("body")[0].appendChild(u),u}function y(t,e){let n=[];for(let r=0;r<t;r++)n.push(e(r));return n}e.capture=l,e.captureSvg=function(t){const n=e.options.appFps/e.options.capturingFps;if(u+1<n)return void u++;const r=(new XMLSerializer).serializeToString(t);f.src="data:image/svg+xml;base64,"+btoa(r),l(f)},e.end=p,e.setOptions=function(t){for(let n in t)e.options[n]=t[n];s=e.options.durationSec<=0}},function(t,e){GIFEncoder=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function n(){this.bin=[]}n.prototype.getData=function(){for(var t="",n=this.bin.length,r=0;r<n;r++)t+=e[this.bin[r]];return t},n.prototype.writeByte=function(t){this.bin.push(t)},n.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},n.prototype.writeBytes=function(t,e,n){for(var r=n||t.length,o=e||0;o<r;o++)this.writeByte(t[o])};var r,o,i,a,c,u,f,s,l,d={},p=null,y=-1,h=0,w=!1,g=[],m=7,v=-1,B=!1,b=!0,F=!1,E=10,S="Generated by jsgif (https://github.com/antimatter15/jsgif/)",A=(d.setDelay=function(t){h=Math.round(t/10)},d.setDispose=function(t){t>=0&&(v=t)},d.setRepeat=function(t){t>=0&&(y=t)},d.setTransparent=function(t){p=t},d.setComment=function(t){S=t},d.addFrame=function(t,e){if(null===t||!w||null===a)throw new Error("Please call start method before calling addFrame");var n=!0;try{e?t instanceof ImageData?(c=t.data,sizeset&&r==t.width&&o==t.height||j(t.width,t.height)):t instanceof Uint8ClampedArray?t.length==r*o*4?c=t:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(c=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,F||j(t.canvas.width,t.canvas.height)),N(),C(),b&&(T(),D(),y>=0&&M()),P(),""!==S&&I(),O(),b||D(),L(),b=!1}catch(t){n=!1}return n},d.download=function(t){if(null===a||0==B)console.log("Please call start method and add frames and call finish method before calling download");else{t=void 0!==t?t.endsWith(".gif")?t:t+".gif":"download.gif";var e=document.createElement("a");e.download=t,e.href=URL.createObjectURL(new Blob([new Uint8Array(a.bin)],{type:"image/gif"})),e.click()}},d.finish=function(){if(!w)return!1;var t=!0;w=!1;try{a.writeByte(59),B=!0}catch(e){t=!1}return t},function(){i=0,c=null,u=null,f=null,l=null,B=!1,b=!0}),j=(d.setFrameRate=function(t){15!=t&&(h=Math.round(100/t))},d.setQuality=function(t){t<1&&(t=1),E=t},d.setSize=function(t,e){w&&!b||((r=t)<1&&(r=320),(o=e)<1&&(o=240),F=!0)}),C=(d.start=function(){A();var t=!0;B=!1,a=new n;try{a.writeUTFBytes("GIF89a")}catch(e){t=!1}return w=t},d.cont=function(){A();return B=!1,a=new n,w=!0},function(){var t=u.length,e=t/3;f=[];var n=new NeuQuant(u,t,E);l=n.process();for(var r=0,o=0;o<e;o++){var a=n.map(255&u[r++],255&u[r++],255&u[r++]);g[a]=!0,f[o]=a}u=null,s=8,m=7,null!==p&&(i=x(p))}),x=function(t){if(null===l)return-1;for(var e=(16711680&t)>>16,n=(65280&t)>>8,r=255&t,o=0,i=16777216,a=l.length,c=0;c<a;){var u=e-(255&l[c++]),f=n-(255&l[c++]),s=r-(255&l[c]),d=u*u+f*f+s*s,p=c/3;g[p]&&d<i&&(i=d,o=p),c++}return o},N=function(){var t=r,e=o;u=[];for(var n=c,i=0,a=0;a<e;a++)for(var f=0;f<t;f++){var s=a*t*4+4*f;u[i++]=n[s],u[i++]=n[s+1],u[i++]=n[s+2]}},P=function(){var t,e;a.writeByte(33),a.writeByte(249),a.writeByte(4),null===p?(t=0,e=0):(t=1,e=2),v>=0&&(e=7&v),e<<=2,a.writeByte(0|e|t),U(h),a.writeByte(i),a.writeByte(0)},I=function(){a.writeByte(33),a.writeByte(254),a.writeByte(S.length),a.writeUTFBytes(S),a.writeByte(0)},O=function(){a.writeByte(44),U(0),U(0),U(r),U(o),b?a.writeByte(0):a.writeByte(128|m)},T=function(){U(r),U(o),a.writeByte(240|m),a.writeByte(0),a.writeByte(0)},M=function(){a.writeByte(33),a.writeByte(255),a.writeByte(11),a.writeUTFBytes("NETSCAPE2.0"),a.writeByte(3),a.writeByte(1),U(y),a.writeByte(0)},D=function(){a.writeBytes(l);for(var t=768-l.length,e=0;e<t;e++)a.writeByte(0)},U=function(t){a.writeByte(255&t),a.writeByte(t>>8&255)},L=function(){new LZWEncoder(r,o,f,s).encode(a)};d.stream=function(){return a},d.setProperties=function(t,e){w=t,b=e};return d},t.exports=GIFEncoder,LZWEncoder=function(){var t,e,n,r,o,i,a,c,u,f,s,l,d={},p=-1,y=12,h=5003,w=y,g=1<<y,m=[],v=[],B=h,b=0,F=!1,E=0,S=0,A=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],j=[],C=d.LZWEncoder=function(o,i,a,c){t=o,e=i,n=a,r=Math.max(2,c)},x=function(t,e){j[l++]=t,l>=254&&O(e)},N=function(t){P(B),b=f+2,F=!0,D(f,t)},P=function(t){for(var e=0;e<t;++e)m[e]=-1},I=d.compress=function(t,e){var n,r,o,i,d,y,h;for(F=!1,c=T(a=u=t),s=(f=1<<t-1)+1,b=f+2,l=0,i=M(),h=0,n=B;n<65536;n*=2)++h;h=8-h,P(y=B),D(f,e);t:for(;(o=M())!=p;)if(n=(o<<w)+i,m[r=o<<h^i]!=n){if(m[r]>=0){d=y-r,0===r&&(d=1);do{if((r-=d)<0&&(r+=y),m[r]==n){i=v[r];continue t}}while(m[r]>=0)}D(i,e),i=o,b<g?(v[r]=b++,m[r]=n):N(e)}else i=v[r];D(i,e),D(s,e)},O=(d.encode=function(n){n.writeByte(r),o=t*e,i=0,I(r+1,n),n.writeByte(0)},function(t){l>0&&(t.writeByte(l),t.writeBytes(j,0,l),l=0)}),T=function(t){return(1<<t)-1},M=function(){return 0===o?p:(--o,255&n[i++])},D=function(t,e){for(E&=A[S],S>0?E|=t<<S:E=t,S+=a;S>=8;)x(255&E,e),E>>=8,S-=8;if((b>c||F)&&(F?(c=T(a=u),F=!1):(++a,c=a==w?g:T(a))),t==s){for(;S>0;)x(255&E,e),E>>=8,S-=8;O(e)}};return C.apply(this,arguments),d},NeuQuant=function(){var t,e,n,r,o,i={},a=256,c=499,u=491,f=487,s=503,l=3*s,d=a-1,p=4,y=100,h=16,w=1<<h,g=10,m=10,v=w>>m,B=w<<g-m,b=a>>3,F=6,E=1<<F,S=b*E,A=30,j=10,C=1<<j,x=8,N=1<<x,P=j+x,I=1<<P,O=[],T=[],M=[],D=[],U=i.NeuQuant=function(t,i,c){var u,f;for(e=t,n=i,r=c,o=new Array(a),u=0;u<a;u++)o[u]=new Array(4),(f=o[u])[0]=f[1]=f[2]=(u<<p+8)/a,M[u]=w/a,T[u]=0},L=function(){for(var t=[],e=new Array(a),n=0;n<a;n++)e[o[n][3]]=n;for(var r=0,i=0;i<a;i++){var c=e[i];t[r++]=o[c][0],t[r++]=o[c][1],t[r++]=o[c][2]}return t},_=function(){var t,e,n,r,i,c,u,f;for(u=0,f=0,t=0;t<a;t++){for(n=t,r=(i=o[t])[1],e=t+1;e<a;e++)(c=o[e])[1]<r&&(n=e,r=c[1]);if(c=o[n],t!=n&&(e=c[0],c[0]=i[0],i[0]=e,e=c[1],c[1]=i[1],i[1]=e,e=c[2],c[2]=i[2],i[2]=e,e=c[3],c[3]=i[3],i[3]=e),r!=u){for(O[u]=f+t>>1,e=u+1;e<r;e++)O[e]=t;u=r,f=t}}for(O[u]=f+d>>1,e=u+1;e<256;e++)O[e]=d},k=function(){var o,i,a,d,h,w,g,m,v,B,b,E,j,x;for(n<l&&(r=1),t=30+(r-1)/3,E=e,j=0,x=n,B=(b=n/(3*r))/y|0,m=C,(g=(w=S)>>F)<=1&&(g=0),o=0;o<g;o++)D[o]=m*((g*g-o*o)*N/(g*g));for(v=n<l?3:n%c!=0?3*c:n%u!=0?3*u:n%f!=0?3*f:3*s,o=0;o<b;)if(a=(255&E[j+0])<<p,d=(255&E[j+1])<<p,h=(255&E[j+2])<<p,i=G(a,d,h),R(m,i,a,d,h),0!==g&&Q(g,i,a,d,h),(j+=v)>=x&&(j-=n),0===B&&(B=1),++o%B==0)for(m-=m/t,(g=(w-=w/A)>>F)<=1&&(g=0),i=0;i<g;i++)D[i]=m*((g*g-i*i)*N/(g*g))},z=(i.map=function(t,e,n){var r,i,c,u,f,s,l;for(f=1e3,l=-1,i=(r=O[e])-1;r<a||i>=0;)r<a&&((c=(s=o[r])[1]-e)>=f?r=a:(r++,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<f&&((u=s[2]-n)<0&&(u=-u),(c+=u)<f&&(f=c,l=s[3])))),i>=0&&((c=e-(s=o[i])[1])>=f?i=-1:(i--,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<f&&((u=s[2]-n)<0&&(u=-u),(c+=u)<f&&(f=c,l=s[3]))));return l},i.process=function(){return k(),z(),_(),L()},function(){var t;for(t=0;t<a;t++)o[t][0]>>=p,o[t][1]>>=p,o[t][2]>>=p,o[t][3]=t}),Q=function(t,e,n,r,i){var c,u,f,s,l,d,p;for((f=e-t)<-1&&(f=-1),(s=e+t)>a&&(s=a),c=e+1,u=e-1,d=1;c<s||u>f;){if(l=D[d++],c<s){p=o[c++];try{p[0]-=l*(p[0]-n)/I,p[1]-=l*(p[1]-r)/I,p[2]-=l*(p[2]-i)/I}catch(t){}}if(u>f){p=o[u--];try{p[0]-=l*(p[0]-n)/I,p[1]-=l*(p[1]-r)/I,p[2]-=l*(p[2]-i)/I}catch(t){}}}},R=function(t,e,n,r,i){var a=o[e];a[0]-=t*(a[0]-n)/C,a[1]-=t*(a[1]-r)/C,a[2]-=t*(a[2]-i)/C},G=function(t,e,n){var r,i,c,u,f,s,l,d,y,w;for(y=d=~(1<<31),l=s=-1,r=0;r<a;r++)(i=(w=o[r])[0]-t)<0&&(i=-i),(c=w[1]-e)<0&&(c=-c),i+=c,(c=w[2]-n)<0&&(c=-c),(i+=c)<d&&(d=i,s=r),(u=i-(T[r]>>h-p))<y&&(y=u,l=r),f=M[r]>>m,M[r]-=f,T[r]+=f<<g;return M[s]+=v,T[s]-=B,l};return U.apply(this,arguments),i}}])}));